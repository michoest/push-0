import{c as q,i as I,e as P,p as G,a as d,h as p,d as ne,l as D,f as oe,g as T,r as y,j as M,o as E,k as V,n as J,m as N,q as W,w,s as Z,t as U,u as ie,v as R,x as ee,y as le,z as ae,A as re,B as _,C as $,Q as K}from"./index.d7ac5daa.js";import{u as se,a as ue,b as ce,Q as de}from"./store.2e1c3e02.js";import"./axios.03dae6bc.js";import"./notify.6197f80f.js";var fe=q({name:"QPageContainer",setup(e,{slots:u}){const{proxy:{$q:i}}=T(),t=I(D,P);if(t===P)return console.error("QPageContainer needs to be child of QLayout"),P;G(oe,!0);const n=d(()=>{const s={};return t.header.space===!0&&(s.paddingTop=`${t.header.size}px`),t.right.space===!0&&(s[`padding${i.lang.rtl===!0?"Left":"Right"}`]=`${t.right.size}px`),t.footer.space===!0&&(s.paddingBottom=`${t.footer.size}px`),t.left.space===!0&&(s[`padding${i.lang.rtl===!0?"Right":"Left"}`]=`${t.left.size}px`),s});return()=>p("div",{class:"q-page-container",style:n.value},ne(u.default))}});const ve={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},O={xs:2,sm:4,md:8,lg:16,xl:24};var he=q({name:"QSeparator",props:{...se,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const u=T(),i=ue(e,u.proxy.$q),t=d(()=>e.vertical===!0?"vertical":"horizontal"),n=d(()=>` q-separator--${t.value}`),s=d(()=>e.inset!==!1?`${n.value}-${ve[e.inset]}`:""),c=d(()=>`q-separator${n.value}${s.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(i.value===!0?" q-separator--dark":"")),h=d(()=>{const l={};if(e.size!==void 0&&(l[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const a=e.spaced===!0?`${O.md}px`:e.spaced in O?`${O[e.spaced]}px`:e.spaced,v=e.vertical===!0?["Left","Right"]:["Top","Bottom"];l[`margin${v[0]}`]=l[`margin${v[1]}`]=a}return l});return()=>p("hr",{class:c.value,style:h.value,"aria-orientation":t.value})}});function me(){const e=y(!M.value);return e.value===!1&&E(()=>{e.value=!0}),{isHydrated:e}}const te=typeof ResizeObserver!="undefined",X=te===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"};var A=q({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:u}){let i=null,t,n={width:-1,height:-1};function s(l){l===!0||e.debounce===0||e.debounce==="0"?c():i===null&&(i=setTimeout(c,e.debounce))}function c(){if(i!==null&&(clearTimeout(i),i=null),t){const{offsetWidth:l,offsetHeight:a}=t;(l!==n.width||a!==n.height)&&(n={width:l,height:a},u("resize",n))}}const{proxy:h}=T();if(h.trigger=s,te===!0){let l;const a=v=>{t=h.$el.parentNode,t?(l=new ResizeObserver(s),l.observe(t),c()):v!==!0&&N(()=>{a(!0)})};return E(()=>{a()}),V(()=>{i!==null&&clearTimeout(i),l!==void 0&&(l.disconnect!==void 0?l.disconnect():t&&l.unobserve(t))}),J}else{let v=function(){i!==null&&(clearTimeout(i),i=null),a!==void 0&&(a.removeEventListener!==void 0&&a.removeEventListener("resize",s,W.passive),a=void 0)},m=function(){v(),t&&t.contentDocument&&(a=t.contentDocument.defaultView,a.addEventListener("resize",s,W.passive),c())};const{isHydrated:l}=me();let a;return E(()=>{N(()=>{t=h.$el,t&&m()})}),V(v),()=>{if(l.value===!0)return p("object",{class:"q--avoid-card-border",style:X.style,tabindex:-1,type:"text/html",data:X.url,"aria-hidden":"true",onLoad:m})}}}}),ge=q({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:u,emit:i}){const{proxy:{$q:t}}=T(),n=I(D,P);if(n===P)return console.error("QFooter needs to be child of QLayout"),P;const s=y(parseInt(e.heightHint,10)),c=y(!0),h=y(M.value===!0||n.isContainer.value===!0?0:window.innerHeight),l=d(()=>e.reveal===!0||n.view.value.indexOf("F")!==-1||t.platform.is.ios&&n.isContainer.value===!0),a=d(()=>n.isContainer.value===!0?n.containerHeight.value:h.value),v=d(()=>{if(e.modelValue!==!0)return 0;if(l.value===!0)return c.value===!0?s.value:0;const o=n.scroll.value.position+a.value+s.value-n.height.value;return o>0?o:0}),m=d(()=>e.modelValue!==!0||l.value===!0&&c.value!==!0),z=d(()=>e.modelValue===!0&&m.value===!0&&e.reveal===!0),g=d(()=>"q-footer q-layout__section--marginal "+(l.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(m.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(l.value!==!0?" hidden":""):"")),C=d(()=>{const o=n.rows.value.bottom,f={};return o[0]==="l"&&n.left.space===!0&&(f[t.lang.rtl===!0?"right":"left"]=`${n.left.size}px`),o[2]==="r"&&n.right.space===!0&&(f[t.lang.rtl===!0?"left":"right"]=`${n.right.size}px`),f});function b(o,f){n.update("footer",o,f)}function x(o,f){o.value!==f&&(o.value=f)}function H({height:o}){x(s,o),b("size",o)}function L(){if(e.reveal!==!0)return;const{direction:o,position:f,inflectionPoint:S}=n.scroll.value;x(c,o==="up"||f-S<100||n.height.value-a.value-f-s.value<300)}function Q(o){z.value===!0&&x(c,!0),i("focusin",o)}w(()=>e.modelValue,o=>{b("space",o),x(c,!0),n.animate()}),w(v,o=>{b("offset",o)}),w(()=>e.reveal,o=>{o===!1&&x(c,e.modelValue)}),w(c,o=>{n.animate(),i("reveal",o)}),w([s,n.scroll,n.height],L),w(()=>t.screen.height,o=>{n.isContainer.value!==!0&&x(h,o)});const r={};return n.instances.footer=r,e.modelValue===!0&&b("size",s.value),b("space",e.modelValue),b("offset",v.value),V(()=>{n.instances.footer===r&&(n.instances.footer=void 0,b("size",0),b("offset",0),b("space",!1))}),()=>{const o=Z(u.default,[p(A,{debounce:0,onResize:H})]);return e.elevated===!0&&o.push(p("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),p("footer",{class:g.value,style:C.value,onFocusin:Q},o)}}});const pe=[Element,String],ye=[null,document,document.body,document.scrollingElement,document.documentElement];function be(e,u){let i=ie(u);if(i===void 0){if(e==null)return window;i=e.closest(".scroll,.scroll-y,.overflow-auto")}return ye.includes(i)?window:i}function we(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function ze(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}let k;function F(){if(k!==void 0)return k;const e=document.createElement("p"),u=document.createElement("div");U(e,{width:"100%",height:"200px"}),U(u,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),u.appendChild(e),document.body.appendChild(u);const i=e.offsetWidth;u.style.overflow="scroll";let t=e.offsetWidth;return i===t&&(t=u.clientWidth),u.remove(),k=i-t,k}const{passive:Y}=W,xe=["both","horizontal","vertical"];var Se=q({name:"QScrollObserver",props:{axis:{type:String,validator:e=>xe.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:pe},emits:["scroll"],setup(e,{emit:u}){const i={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let t=null,n,s;w(()=>e.scrollTarget,()=>{l(),h()});function c(){t!==null&&t();const m=Math.max(0,we(n)),z=ze(n),g={top:m-i.position.top,left:z-i.position.left};if(e.axis==="vertical"&&g.top===0||e.axis==="horizontal"&&g.left===0)return;const C=Math.abs(g.top)>=Math.abs(g.left)?g.top<0?"up":"down":g.left<0?"left":"right";i.position={top:m,left:z},i.directionChanged=i.direction!==C,i.delta=g,i.directionChanged===!0&&(i.direction=C,i.inflectionPoint=i.position),u("scroll",{...i})}function h(){n=be(s,e.scrollTarget),n.addEventListener("scroll",a,Y),a(!0)}function l(){n!==void 0&&(n.removeEventListener("scroll",a,Y),n=void 0)}function a(m){if(m===!0||e.debounce===0||e.debounce==="0")c();else if(t===null){const[z,g]=e.debounce?[setTimeout(c,e.debounce),clearTimeout]:[requestAnimationFrame(c),cancelAnimationFrame];t=()=>{g(z),t=null}}}const{proxy:v}=T();return w(()=>v.$q.lang.rtl,c),E(()=>{s=v.$el.parentNode,h()}),V(()=>{t!==null&&t(),l()}),Object.assign(v,{trigger:a,getPosition:()=>i}),J}}),$e=q({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:u,emit:i}){const{proxy:{$q:t}}=T(),n=y(null),s=y(t.screen.height),c=y(e.container===!0?0:t.screen.width),h=y({position:0,direction:"down",inflectionPoint:0}),l=y(0),a=y(M.value===!0?0:F()),v=d(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),m=d(()=>e.container===!1?{minHeight:t.screen.height+"px"}:null),z=d(()=>a.value!==0?{[t.lang.rtl===!0?"left":"right"]:`${a.value}px`}:null),g=d(()=>a.value!==0?{[t.lang.rtl===!0?"right":"left"]:0,[t.lang.rtl===!0?"left":"right"]:`-${a.value}px`,width:`calc(100% + ${a.value}px)`}:null);function C(r){if(e.container===!0||document.qScrollPrevented!==!0){const o={position:r.position.top,direction:r.direction,directionChanged:r.directionChanged,inflectionPoint:r.inflectionPoint.top,delta:r.delta.top};h.value=o,e.onScroll!==void 0&&i("scroll",o)}}function b(r){const{height:o,width:f}=r;let S=!1;s.value!==o&&(S=!0,s.value=o,e.onScrollHeight!==void 0&&i("scrollHeight",o),H()),c.value!==f&&(S=!0,c.value=f),S===!0&&e.onResize!==void 0&&i("resize",r)}function x({height:r}){l.value!==r&&(l.value=r,H())}function H(){if(e.container===!0){const r=s.value>l.value?F():0;a.value!==r&&(a.value=r)}}let L=null;const Q={instances:{},view:d(()=>e.view),isContainer:d(()=>e.container),rootRef:n,height:s,containerHeight:l,scrollbarWidth:a,totalWidth:d(()=>c.value+a.value),rows:d(()=>{const r=e.view.toLowerCase().split(" ");return{top:r[0].split(""),middle:r[1].split(""),bottom:r[2].split("")}}),header:R({size:0,offset:0,space:!1}),right:R({size:300,offset:0,space:!1}),footer:R({size:0,offset:0,space:!1}),left:R({size:300,offset:0,space:!1}),scroll:h,animate(){L!==null?clearTimeout(L):document.body.classList.add("q-body--layout-animate"),L=setTimeout(()=>{L=null,document.body.classList.remove("q-body--layout-animate")},155)},update(r,o,f){Q[r][o]=f}};if(G(D,Q),F()>0){let f=function(){r=null,o.classList.remove("hide-scrollbar")},S=function(){if(r===null){if(o.scrollHeight>t.screen.height)return;o.classList.add("hide-scrollbar")}else clearTimeout(r);r=setTimeout(f,300)},B=function(j){r!==null&&j==="remove"&&(clearTimeout(r),f()),window[`${j}EventListener`]("resize",S)},r=null;const o=document.body;w(()=>e.container!==!0?"add":"remove",B),e.container!==!0&&B("add"),ee(()=>{B("remove")})}return()=>{const r=Z(u.default,[p(Se,{onScroll:C}),p(A,{onResize:b})]),o=p("div",{class:v.value,style:m.value,ref:e.container===!0?void 0:n,tabindex:-1},r);return e.container===!0?p("div",{class:"q-layout-container overflow-hidden",ref:n},[p(A,{onResize:x}),p("div",{class:"absolute-full",style:z.value},[p("div",{class:"scroll",style:g.value},[o])])]):o}}});const Te=Object.assign({name:"AppLayout"},{__name:"app.layout",setup(e){const u=ce(),i=I("notify");E(async()=>{t.value=u.persistent.api,await s(),navigator.serviceWorker.addEventListener("message",h)}),ee(()=>{navigator.serviceWorker.removeEventListener("message",h)});const t=y(""),n=y(!1),s=async()=>{n.value=await u.checkAPI(t.value)},c=()=>{u.setAPI(t.value),i("API updated!")},h=l=>{l.data&&l.data.type==="PUSH_RECEIVED"&&u.handlePush(l.data.payload)};return(l,a)=>{const v=le("router-view");return ae(),re($e,{view:"lHh Lpr lFf"},{default:_(()=>[$(fe,null,{default:_(()=>[$(v)]),_:1}),$(ge,{class:"bg-grey-2 text-primary"},{default:_(()=>[$(he),$(de,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=m=>t.value=m),placeholder:"API URL",class:"q-mx-sm"},{append:_(()=>[$(K,{round:"",dense:"",flat:"",icon:"network_check",color:n.value?"positive":"negative",onClick:s},null,8,["color"]),$(K,{round:"",dense:"",flat:"",color:"primary",icon:"sync",onClick:c})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});export{Te as default};
